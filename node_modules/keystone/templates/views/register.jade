block variables
		title Register | Politik POC
extends ../layout/auth
block content
	h1.sr-only Sign In
	<h2 style="text-align: center">Get Started</h2>
	form(method="post", novalidate).auth-form
		.auth-box
			.auth-box-col
				//include ../includes/auth-brand
				if !user
					.form-group
						label(for='fname') First Name
						input(type='text', name='fname', id='fname', value=submitted.fname).form-control
					.form-group
						label(for='password') Password
						input(type='password', name='password', id='password').form-control
					.form-group
						label(for='email') Email
						input(type='email', name='email', id='email', value=submitted.email).form-control
					.form-group
						label(for='post') Post
						input(type='text', name='post', id='post', value=submitted.post).form-control
					.form-group
						label(for='qualification') Qualification
						input(type='text', name='qualification', id='qualification', value=submitted.qualification).form-control
					.form-group
						label(for='party') Party
						input(type='text', name='party', id='party', value=submitted.party).form-control
					.form-group				
						a(href="/social/facebook/login" style="padding-top: 20px")
							img(src="/images/11405239_920140564714397_256329502_n.png" style="padding-top: 20px")

			.auth-box-col
				if user
					p.lead Hi #{user.name.first},
					p.lead You're already signed in.
					.toolbar
						if user.isAdmin
							a(href='/admin').btn.btn-primary Open Keystone
						a(href='/admin/signout').btn.btn-cancel Sign out
				
				else			
					input(type='hidden', name=csrf_token_key, value=csrf_token_value)
					
					.form-group
						label(for='lname') Last Name
						input(type='text', name='lname', id='lname', value=submitted.lname).form-control			
					.form-group
						label(for='confirm-password') Confirm Password
						input(type='password', name='confirm-password', id='confirm-password').form-control
					.form-group
						label(for='location') Location
						input(type='text', name='location', id='location', value=submitted.location).form-control
					
					.form-group
						label(for='company') Company
						input(type='text', name='company', id='company', value=submitted.company).form-control
					.form-group
						label(for='university') University
						input(type='text', name='university', id='university', value=submitted.university).form-control
					.form-group
						button(type='submit' style="margin-top: 25px").btn.btn-primary Register
					
					//- TODO generic forgotten password functionality
					//- button(type='button').btn.btn-link Forgot Password?

					.form-group
						a(href="/social/google/login" style="padding-top: 20px")
							img(src="/images/btn_google_signin_light_normal_web.png" style="padding-top: 20px")
				
block js
	//- Only focus the field after the shake animation is complete
	if messages && messages.error.length
		script setTimeout(function() { try { document.getElementById('name').focus(); } catch(e) {}; }, 800);
	else
		script try { document.getElementById('name').focus(); } catch(e) {};
